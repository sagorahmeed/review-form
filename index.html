<head>
    <link rel="stylesheet" href="./styles.css">
</head>
<div class="container-fluid">
    <div class="review-container">
        <div class="review-heading">
            <p class="review-title">Review</p>
            <button class="review-button">
                Write A Review
            </button>
        </div>
        <div class="customer-review-details">
            <!-- customer review details start -->
            <div class="customer-total-review">
                <h1 class="total-review">Customers Reviews</h1>
                <div class="customer-rating-start">
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <img class="rating-start" src="./public/star-svg/Group (1).svg" alt="review customer rating" />
                </div>
                <p class="review-rating">4.5 <span class="review-rating-max">out of 5</span></p>
                <p class="total-max-review">Total 1200 reviews</p>
            </div>
            <!-- customer review details end -->

            <!-- customer-total-review-progress start-->
            <div class="customer-total-review-progress">
                <div class="customer-total-review-progress-info">
                    <p class="progress-review-total">5</p>
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <div className="" style="width: 100%">
                        <div id="ProgressBar" className="" style="">
                            <div className="" id="bar"></div>
                        </div>
                    </div>

                    <p id="progress-percentage">(50%)</p>
                </div>

                <div class="customer-total-review-progress-info">
                    <p class="progress-review-total">5</p>
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <div className="" style="width: 100%">
                        <div id="ProgressBar" className="" style="">
                            <div className="" id="bar"></div>
                        </div>
                    </div>
                    <p id="progress-percentage">(50%)</p>
                </div>

                <div class="customer-total-review-progress-info">
                    <p class="progress-review-total">5</p>
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <div className="" style="width: 100%">
                        <div id="ProgressBar" className="" style="">
                            <div className="" id="bar"></div>
                        </div>
                    </div>
                    <p id="progress-percentage">(50%)</p>
                </div>

                <div class="customer-total-review-progress-info">
                    <p class="progress-review-total">5</p>
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <div className="" style="width: 100%">
                        <div id="ProgressBar" className="" style="">
                            <div className="" id="bar"></div>
                        </div>
                    </div>
                    <p id="progress-percentage">(50%)</p>
                </div>

                <div class="customer-total-review-progress-info">
                    <p class="progress-review-total">5</p>
                    <img class="rating-start" src="./public/star-svg/Group.svg" alt="review customer rating" />
                    <div className="" style="width: 100%">
                        <div id="ProgressBar" className="" style="">
                            <div className="" id="bar"></div>
                        </div>
                    </div>
                    <p id="progress-percentage">(50%)</p>
                </div>
            </div>
            <!-- customer-total-review-progress end-->

            <!-- total review star desc start-->
            <div class="total-review-star-desc">
                <div class="total-review-star">
                    <div class="star">
                        <img class="total-rating-start" src="./public/star-svg/Group.svg"
                            alt="review customer rating" />
                        <img class="total-rating-start" src="./public/star-svg/Group.svg"
                            alt="review customer rating" /><img class="total-rating-start"
                            src="./public/star-svg/Group.svg" alt="review customer rating" />

                        <img class="total-rating-start" src="./public/star-svg/Group.svg"
                            alt="review customer rating" /><img class="total-rating-start"
                            src="./public/star-svg/Group.svg" alt="review customer rating" />
                    </div>
                    <h1 class="star-title">(840)</h1>
                </div>


                <div class="total-review-star">
                    <div class="star">
                        <img class="total-rating-start" src="./public/star-svg/success-star.svg"
                            alt="review customer rating" />
                        <img class="total-rating-start" src="./public/star-svg/success-star.svg"
                            alt="review customer rating" /><img class="total-rating-start"
                            src="./public/star-svg/success-star.svg" alt="review customer rating" />

                        <img class="total-rating-start" src="./public/star-svg/success-star.svg"
                            alt="review customer rating" />
                    </div>
                    <h1 class="star-title">(240)</h1>
                </div>

                <div class="total-review-star">
                    <div class="star">
                        <img class="total-rating-start" src="./public/star-svg/light-danger.svg"
                            alt="review customer rating" />
                        <img class="total-rating-start" src="./public/star-svg/light-danger.svg"
                            alt="review customer rating" /><img class="total-rating-start"
                            src="./public/star-svg/light-danger.svg" alt="review customer rating" />
                    </div>
                    <h1 class="star-title">(60)</h1>
                </div>

                <div class="total-review-star">
                    <div class="star">
                        <img class="total-rating-start" src="./public/star-svg/warning-star.svg"
                            alt="review customer rating" />
                        <img class="total-rating-start" src="./public/star-svg/warning-star.svg"
                            alt="review customer rating" />
                    </div>
                    <h1 class="star-title">(24)</h1>
                </div>

                <div class="total-review-star">
                    <div class="star">
                        <img class="total-rating-start" src="./public/star-svg/danger-star.svg"
                            alt="review customer rating" />
                    </div>
                    <h1 class="star-title">(36)</h1>
                </div>
            </div>
            <!-- total review star desc end-->
        </div>
        <div class="review-form-wrapper">
            <form id="revew-form">
                <h1 class="review-form-wrapper-heading">Write review</h1>
                <div class="review-review-details">
                    <div class="review-review-product-img">
                        <img src="{{ product.featured_image | img_url: '275x' }}"
                            alt="{{ product.featured_image.alt | escape }}" width="100" height="100"
                            class="review-review-product-img">

                    </div>
                    <div class="review-review-product-info">
                        <h1 class="review-review-product-info-heading">{{product.name}}</h1>
                        <div class="review-rate rating">
                            <input type="radio" id="5" value="5" name="rate" />
                            <label for="5"></label>
                            <input type="radio" id="4" name="rate" value="4" />
                            <label for="4"></label>
                            <input type="radio" id="3" name="rate" value="3" />
                            <label for="3"></label>
                            <input type="radio" id="2" name="rate" value="2" />
                            <label for="2"></label>
                            <input type="radio" id="1" name="rate" value="1" />
                            <label for="1"></label>
                        </div>
                    </div>
                </div>
                <div class="review-input-form-desc">
                    <div class="review-input-wrapper">
                        <label class="review-input-label" for="customername">Name</label>
                        <input type="text" placeholder="Name" required name="customername" id="customername"
                            class="review-input-field">
                    </div>
                    <div class="review-input-wrapper">
                        <label class="review-input-label" for="email">Email Address</label>
                        <input type="email" placeholder="Email address" required name="email" id="email"
                            class="review-input-field">
                    </div>
                    <div class="review-input-wrapper">
                        <label class="review-input-label" for="review_title">Review Title</label>
                        <input type="text" placeholder="Review title" name="title" id="review_title"
                            class="review-input-field">
                    </div>
                    <div class="review-input-wrapper">
                        <label class="review-input-label" for="feedback">Your Feedback</label>
                        <textarea type="text" rows="5" placeholder="Your feedback" name="feedback" id="feedback"
                            class="review-"></textarea>
                    </div>
                    <div class="review-input-wrapper">
                        <p class="review-input-label">Attachment</label>
                            <!-- <div class="review-uploaded-info">
                            <img class="review-uploader-img" src="./public/images/review-attachment-uploader.svg" alt="reviews Attachment uploader image">
                            <p class="review-uploader-title">Add Photo/Video</p>
                            <p class="review-uploader-info"><span class="review-uploaded-link"><input type="file" class="custom-file-input"/></span> or drug & drop</p>
                        </div> -->
                        <div style="margin-top: 24px;">
                            <input name="file" multiple type="file" />
                        </div>
                    </div>
                    <div class="review-input-wrapper">
                        <input class="review-styled-checkbox" id="styled-checkbox-1" name="isAnnonymous"
                            type="checkbox">
                        <label for="styled-checkbox-1">Mark as anonymous</label>
                    </div>
                    <div class="review-btn-body">
                        <a href="#" class="review-btn-link">
                            <button class="review-btn btn-text"><span class="review-btn__btn">Submit Review </span>
                                <div class="btn-loader review-btn__loader hide">
                                    <div class="loader">&#160;
                                    </div>
                                </div>
                            </button>
                        </a>
                    </div>
            </form>
            <!-- form end -->
        </div>
    </div>

    <div class="single-review-with-reply">
        <div class="single-review">
            <div class="left-side">
                <img class="reviewer-img" src="./public/widget/reviews-review-owner.png" alt="people 1" />
            </div>
            <div class="right-side">
                <div class="flag-name-rating-date">
                    <div>
                        <div class="flag-with-name">
                            <img class="country-flag" src="./public/widget//flag 1.png" alt="flag" />
                            <h4 class="reviewer-name reviews-review-heading-h6">Brooklyn Simmons</h4>
                        </div>
                        <div class="reviews-stars">
                            <i class="reviews-icon"><img src="./public/widget//revews-star.svg" alt="star-icon" /></i>
                            <i class="reviews-icon"><img src="./public/widget//revews-star.svg" alt="star-icon" /></i>
                            <i class="reviews-icon"><img src="./public/widget//revews-star.svg" alt="star-icon" /></i>
                            <i class="reviews-icon"><img src="./public/widget//revews-star.svg" alt="star-icon" /></i>
                            <i class="reviews-icon"><img src="./public/widget//revews-star.svg" alt="star-icon" /></i>
                        </div>
                    </div>

                    <div>
                        <p class="date reviews-review-title">August 7, 2017</p>
                    </div>
                </div>
                <div class="review-section">
                    <p class="review-title p-alt reviews-review-title">Very nice product</p>
                    <p class="review-description reviews-review-title">
                        So, how do you create an organization that is nimble, flexible and
                        takes a fresh view of team structure? These are the keys to
                        creating maintaining a successful business that will last the test
                        of time.
                    </p>
                    <div class="review-attachments">
                        <img class="review-img" src="./public/widget//review 1.png" alt="review 1" />
                        <img class="review-img" src="./public/widget//review 2.png" alt="review 2" />
                        <img class="review-img" src="./public/widget//review 3.png" alt="review 3" />
                    </div>
                </div>
                <div class="action-buttons">
                    <div class="share-section">
                        <div class="text-with-icon">
                            <span class="">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" style="margin-right: 6px;"
                                    height="16" viewBox="0 0 16 16" fill="none">
                                    <path
                                        d="M12 10.7197C11.4933 10.7197 11.04 10.9197 10.6933 11.233L5.94 8.46634C5.97333 8.31301 6 8.15967 6 7.99967C6 7.83967 5.97333 7.68634 5.94 7.53301L10.64 4.79301C11 5.12634 11.4733 5.33301 12 5.33301C13.1067 5.33301 14 4.43967 14 3.33301C14 2.22634 13.1067 1.33301 12 1.33301C10.8933 1.33301 10 2.22634 10 3.33301C10 3.49301 10.0267 3.64634 10.06 3.79967L5.36 6.53967C5 6.20634 4.52667 5.99967 4 5.99967C2.89333 5.99967 2 6.89301 2 7.99967C2 9.10634 2.89333 9.99967 4 9.99967C4.52667 9.99967 5 9.79301 5.36 9.45967L10.1067 12.233C10.0733 12.373 10.0533 12.5197 10.0533 12.6663C10.0533 13.7397 10.9267 14.613 12 14.613C13.0733 14.613 13.9467 13.7397 13.9467 12.6663C13.9467 11.593 13.0733 10.7197 12 10.7197Z"
                                        fill="#757575" />
                                </svg>
                            </span> <span>Share</span>
                        </div>
                        <span>
                            <a href="https://facebook.com" class="" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" style="margin-left: 6px;" height="16"
                                    viewBox="0 0 16 16" fill="none">
                                    <path
                                        d="M16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 11.993 2.92547 15.3027 6.75 15.9028V10.3125H4.71875V8H6.75V6.2375C6.75 4.2325 7.94438 3.125 9.77172 3.125C10.6467 3.125 11.5625 3.28125 11.5625 3.28125V5.25H10.5538C9.56 5.25 9.25 5.86672 9.25 6.5V8H11.4688L11.1141 10.3125H9.25V15.9028C13.0745 15.3027 16 11.993 16 8Z"
                                        fill="#757575" />
                                </svg>
                            </a>
                        </span>

                        <span>
                            <a href="https://twitter.com" class="" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" style="margin-left: 6px;" height="16"
                                    viewBox="0 0 16 16" fill="none">
                                    <g clip-path="url(#clip0_4703_36506)">
                                        <path
                                            d="M5.03344 14.5005C11.0697 14.5005 14.3722 9.49829 14.3722 5.16173C14.3722 5.0211 14.3691 4.87735 14.3628 4.73673C15.0052 4.27213 15.5597 3.69666 16 3.03735C15.4017 3.30355 14.7664 3.47741 14.1159 3.55298C14.8009 3.14243 15.3137 2.49747 15.5594 1.73767C14.915 2.11953 14.2104 2.3889 13.4756 2.53423C12.9806 2.0082 12.326 1.6599 11.6131 1.54319C10.9003 1.42648 10.1688 1.54786 9.53183 1.88855C8.89486 2.22925 8.38787 2.77029 8.08923 3.42803C7.7906 4.08577 7.71695 4.82356 7.87969 5.52735C6.575 5.46188 5.29862 5.12296 4.13332 4.53255C2.96802 3.94215 1.9398 3.11345 1.11531 2.10017C0.696266 2.82265 0.568038 3.67758 0.756687 4.49122C0.945337 5.30485 1.43671 6.01612 2.13094 6.48048C1.60975 6.46393 1.09998 6.32361 0.64375 6.0711V6.11173C0.643283 6.86992 0.905399 7.60488 1.38554 8.19167C1.86568 8.77846 2.53422 9.18086 3.2775 9.33048C2.7947 9.46257 2.28799 9.48182 1.79656 9.38673C2.0063 10.0388 2.41438 10.6091 2.96385 11.018C3.51331 11.427 4.17675 11.6542 4.86156 11.668C3.69895 12.5812 2.26278 13.0766 0.784375 13.0742C0.522191 13.0738 0.260266 13.0578 0 13.0261C1.5019 13.9897 3.24902 14.5014 5.03344 14.5005Z"
                                            fill="#757575" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_4703_36506">
                                            <rect width="16" height="16" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>
                            </a>
                        </span>
                        <span>
                            <a href="https://instagram.com" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" style="margin-left: 6px;" height="16"
                                    viewBox="0 0 16 16" fill="none">
                                    <path
                                        d="M8 1.44062C10.1375 1.44062 10.3906 1.45 11.2313 1.4875C12.0125 1.52187 12.4344 1.65313 12.7156 1.7625C13.0875 1.90625 13.3563 2.08125 13.6344 2.35938C13.9156 2.64062 14.0875 2.90625 14.2313 3.27813C14.3406 3.55938 14.4719 3.98438 14.5063 4.7625C14.5438 5.60625 14.5531 5.85938 14.5531 7.99375C14.5531 10.1313 14.5438 10.3844 14.5063 11.225C14.4719 12.0063 14.3406 12.4281 14.2313 12.7094C14.0875 13.0813 13.9125 13.35 13.6344 13.6281C13.3531 13.9094 13.0875 14.0813 12.7156 14.225C12.4344 14.3344 12.0094 14.4656 11.2313 14.5C10.3875 14.5375 10.1344 14.5469 8 14.5469C5.8625 14.5469 5.60938 14.5375 4.76875 14.5C3.9875 14.4656 3.56563 14.3344 3.28438 14.225C2.9125 14.0813 2.64375 13.9063 2.36563 13.6281C2.08438 13.3469 1.9125 13.0813 1.76875 12.7094C1.65938 12.4281 1.52813 12.0031 1.49375 11.225C1.45625 10.3813 1.44688 10.1281 1.44688 7.99375C1.44688 5.85625 1.45625 5.60313 1.49375 4.7625C1.52813 3.98125 1.65938 3.55938 1.76875 3.27813C1.9125 2.90625 2.0875 2.6375 2.36563 2.35938C2.64688 2.07812 2.9125 1.90625 3.28438 1.7625C3.56563 1.65313 3.99063 1.52187 4.76875 1.4875C5.60938 1.45 5.8625 1.44062 8 1.44062ZM8 0C5.82813 0 5.55625 0.009375 4.70313 0.046875C3.85313 0.084375 3.26875 0.221875 2.7625 0.41875C2.23438 0.625 1.7875 0.896875 1.34375 1.34375C0.896875 1.7875 0.625 2.23438 0.41875 2.75938C0.221875 3.26875 0.084375 3.85 0.046875 4.7C0.009375 5.55625 0 5.82812 0 8C0 10.1719 0.009375 10.4438 0.046875 11.2969C0.084375 12.1469 0.221875 12.7313 0.41875 13.2375C0.625 13.7656 0.896875 14.2125 1.34375 14.6562C1.7875 15.1 2.23438 15.375 2.75938 15.5781C3.26875 15.775 3.85 15.9125 4.7 15.95C5.55313 15.9875 5.825 15.9969 7.99688 15.9969C10.1688 15.9969 10.4406 15.9875 11.2938 15.95C12.1438 15.9125 12.7281 15.775 13.2344 15.5781C13.7594 15.375 14.2063 15.1 14.65 14.6562C15.0938 14.2125 15.3688 13.7656 15.5719 13.2406C15.7688 12.7313 15.9063 12.15 15.9438 11.3C15.9813 10.4469 15.9906 10.175 15.9906 8.00313C15.9906 5.83125 15.9813 5.55938 15.9438 4.70625C15.9063 3.85625 15.7688 3.27188 15.5719 2.76562C15.375 2.23438 15.1031 1.7875 14.6563 1.34375C14.2125 0.9 13.7656 0.625 13.2406 0.421875C12.7313 0.225 12.15 0.0875 11.3 0.05C10.4438 0.009375 10.1719 0 8 0Z"
                                        fill="#757575" />
                                    <path
                                        d="M8 3.89062C5.73125 3.89062 3.89062 5.73125 3.89062 8C3.89062 10.2688 5.73125 12.1094 8 12.1094C10.2688 12.1094 12.1094 10.2688 12.1094 8C12.1094 5.73125 10.2688 3.89062 8 3.89062ZM8 10.6656C6.52813 10.6656 5.33437 9.47188 5.33437 8C5.33437 6.52813 6.52813 5.33437 8 5.33437C9.47188 5.33437 10.6656 6.52813 10.6656 8C10.6656 9.47188 9.47188 10.6656 8 10.6656Z"
                                        fill="#757575" />
                                    <path
                                        d="M13.2312 3.72793C13.2312 4.25918 12.8 4.68731 12.2719 4.68731C11.7406 4.68731 11.3125 4.25606 11.3125 3.72793C11.3125 3.19668 11.7438 2.76855 12.2719 2.76855C12.8 2.76855 13.2312 3.19981 13.2312 3.72793Z"
                                        fill="#757575" />
                                </svg>
                            </a>
                        </span>
                    </div>

                    <div class="helpful-section">
                        <h6 class="reviews-review-heading-h6">Helpful</h6>
                        <div class="icon-with-text">
                            <span class="material-icons"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 16 16" fill="none">
                                    <path
                                        d="M8.74662 1.37299L5.05329 5.06632C4.80663 5.31299 4.66663 5.65299 4.66663 6.00632V12.6663C4.66663 13.3997 5.26663 13.9997 5.99996 13.9997H12C12.5333 13.9997 13.0133 13.6797 13.2266 13.193L15.4 8.11965C15.96 6.79965 14.9933 5.33299 13.56 5.33299H9.79329L10.4266 2.27965C10.4933 1.94632 10.3933 1.60632 10.1533 1.36632C9.75996 0.979654 9.13329 0.979654 8.74662 1.37299ZM1.99996 13.9997C2.73329 13.9997 3.33329 13.3997 3.33329 12.6663V7.33299C3.33329 6.59965 2.73329 5.99965 1.99996 5.99965C1.26663 5.99965 0.666626 6.59965 0.666626 7.33299V12.6663C0.666626 13.3997 1.26663 13.9997 1.99996 13.9997Z"
                                        fill="#18A87C" />
                                </svg>
                            </span> (20)
                        </div>
                        <div class="icon-with-text">
                            <span class="material-icons"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                    viewBox="0 0 16 16" fill="none">
                                    <path
                                        d="M7.25335 14.6267L10.94 10.9333C11.1867 10.6867 11.3267 10.3467 11.3267 9.99333V3.33333C11.3267 2.6 10.7267 2 9.99335 2H4.00001C3.46668 2 2.98668 2.32 2.78001 2.80667L0.606681 7.88C0.0400144 9.2 1.00668 10.6667 2.44001 10.6667H6.20668L5.57335 13.72C5.50668 14.0533 5.60668 14.3933 5.84668 14.6333C6.24002 15.02 6.86668 15.02 7.25335 14.6267ZM14 2C13.2667 2 12.6667 2.6 12.6667 3.33333V8.66667C12.6667 9.4 13.2667 10 14 10C14.7333 10 15.3333 9.4 15.3333 8.66667V3.33333C15.3333 2.6 14.7333 2 14 2Z"
                                        fill="#757575" />
                                </svg> </span> (5)
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="reply">
            <div class="icon-with-text">
                <span class="material-icons">reply</span> Reply
            </div>
            <div class="logo-with-text">
                <img class="shop-logo" src="./public/widget//shop-owner.png" alt="shop owner logo" />
                <h4 class="reviews-review-heading-h4">Shop Owner</h4>
            </div>
            <div class="reply-text">
                <p class="reviews-review-title">
                    So, how do you create an organization that is nimble, flexible and
                    takes a fresh view of team structure? These are the keys to creating
                    maintaining a successful business that will last the test of time.
                </p>
            </div>
        </div>
    </div>

    <!-- end right side -->
</div>
<!-- end single review section -->

<!-- reply section -->

<!-- end reply section -->
</div>
<!-- end single review with reply -->
</div>
<script>
    const form = document.querySelector('#revew-form')
    form.addEventListener('submit', async (e) => {
        e.preventDefault()
        const { isAnnonymous, customername, email, title, feedback, file } = e.currentTarget
        const files = file.files
        const shop_domain = "{{shop.permanent_domain}} "
        const product_id = "{{product.id}}"
        const rating = [...document.querySelectorAll('input[type=radio]')]?.find(input => input.checked)?.value
        if (!rating) return alert('Please Give a Review First')
        const loaderButton = form.querySelector('.review-btn__loader')
        const submitButton = form.querySelector('.review-btn__btn')
        const loadingEffect = () => {
            submitButton.classList.toggle('hide')
            loaderButton.classList.toggle('hide')
        }
        // const stopLoadingEffect = () => {
        //     submitButton.classList.add('hide')
        //     loaderButton.classList.remove('hide')
        // }

        try {
            loadingEffect()
            const formData = new FormData();
            formData.append("name", customername.value)
            formData.append("email", email.value)
            formData.append("title", title.value)
            formData.append("feedback", feedback.value)
            formData.append("anonymous", isAnnonymous.checked)
            Array.from(files).forEach((image_file) => {
                formData.append('files[]', image_file);
            });
            formData.append("rating", rating)
            formData.append("shop_domain", shop_domain)
            formData.append("product_id", product_id)
            const response = await fetch('https://a373-114-134-91-218.ngrok.io/api/v1/reviews', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            const parsedResponse = await response.json()
            alert(parsedResponse.message)
        }
        catch (err) {
            console.log(err, 'very error')
            alert('Something went wrong')
        }
        finally {
            loadingEffect()
        }

    })
</script>